/* auther:xiexy;date:2020-07-01;dependency:jquery-3.4.1-min.js;keyWord:图片放大镜 */
$(function($){$.fn.magnifier=function(attributes){var $element=this;if(!$element.is("img")){console.error("传入的dom: "+$element[0].className+" 不是图片类型.","background: #FCEBB6; color: #F07818; font-size: 17px; font-weight: bold;","background: #FCEBB6; color: #F07818; font-size: 17px;");return}var $IMAGE_URL=$element.attr("src");var $IMAGE_WIDTH=$element.width();var $IMAGE_HEIGHT=$element.height();var NATIVE_IMG=new Image();NATIVE_IMG.src=$element.attr("src");if($element[0].offsetWidth>=$element[0].naturalWidth){console.warn("图片"+$element[0].className+"的尺寸大于实际尺寸，放大镜失效");return}var defaults={round:true,width:200,height:200,background:"#FFF",shadow:"0 8px 17px 0 rgba(0, 0, 0, 0.2)",border:"6px solid #FFF",cursor:true,zIndex:999999};if(!!attributes.newsize){defaults.width=attributes.newsize;defaults.height=attributes.newsize}var $options=$.extend(defaults,attributes);$element.on("dragstart",function(e){e.preventDefault()});$element.css({"cursor":$options.cursor?"crosshair":"none"});var lens=document.createElement("div");lens.id=!!attributes.magnifer_id?"BlowupLens_"+attributes.magnifer_id:"BlowupLens";$("body").append(lens);$blowupLens=!!attributes.magnifer_id?$("#BlowupLens_"+attributes.magnifer_id):$("#BlowupLens");$blowupLens.css({"position":"absolute","border":"2px solid #FFF","box-shadow":"rgba(0, 0, 0, 0.7) 0px 1px 10px","visibility":"hidden","background":"url("+NATIVE_IMG.src+") 0 0 no-repeat","border-radius":"50%","pointer-events":"none","z-index":"999999"});$element.mouseenter(function(){$blowupLens.css({"visibility":"visible"})});$element.mousemove(function(e){var lensX=e.pageX-$options.width/2;var lensY=e.pageY-$options.height/2;var relX=e.pageX-this.offsetLeft;var relY=e.pageY-this.offsetTop;var zoomX=-Math.floor(relX/$element.width()*NATIVE_IMG.width-$options.width/2);var zoomY=-Math.floor(relY/$element.height()*NATIVE_IMG.height-$options.height/2);$blowupLens.css({"left":lensX,"top":lensY,"background-image":"url("+$IMAGE_URL+")","background-position":zoomX+"px "+zoomY+"px"});if(!!attributes.newsize){$blowupLens.css({"width":attributes.newsize,"height":attributes.newsize})}});$element.mouseleave(function(){$blowupLens.css("visibility","hidden")})}});